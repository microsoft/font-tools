<!DOCTYPE html>
<html>
	<head>
		<title>Egyptian demo</title>
		<meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
		<style type='text/css'>
			@font-face {
				font-family: 'Egyptian';
				src: url('eot.ttf') format('TrueType');
			}
			body {
				background-color:#aaa;
				font-family: "Segoe UI";
			}
			
			.flex-container {
			  padding-top: 85px;
			  display: flex;
		      flex-direction: row;
			  flex-flow: row wrap;
			  align-items: center;
			  justify-content: center;
			  vertical-align: middle;
			}
			
			.flexcell {
				position: relative;
				color: white;
				background-color: #000000;
				background-color: #444444;
				margin: 5px;
				padding: 0px;
				height: 320px;
				text-align: center;
				box-shadow: 4px 3pt 10pt #888888;
			}

			.text {
				width: 600px;
			}
			
			.ctrls {
				width: 275px;
				vertical-align: middle;
				color: #000;
				background-color: #eee;
			    transition: opacity .2s;
			}			

			div.lm {
				color: #000;
				background-color: #fff;
			    transition: opacity .2s;
			}

			div.slm {
				color: #444;
				background-color: #888;
			    transition: opacity .2s;
			}

			div.sdm {
				color: #888;
				background-color: #444;
			    transition: opacity .2s;
			}
			
			div.dm {
				color: white;
				background-color: #000;
			    transition: opacity .2s;
			}
			
			.vf {
				line-height: 300px;
				height: 300px;
			}
			
			.slidecontainer {
				padding-top: 5px;
				width: 95%;    
				margin-left: auto;
				margin-right: auto;
				left: 10px;
				right: 10px;
			}

			.slider {
			  appearance: none;
			  width: 70%;
			  height: 3px;
			  background: #ababab;
			  outline: none;
			  opacity: 0.7;
			  transition: opacity .2s;
			  border-radius: 3px;
			  float: right;
			}

			.slider:hover {
			  opacity: 1;
			}

			.slider::-webkit-slider-thumb {
			  appearance: none;
			  border-radius: 15px;
			  width: 15px;
			  height: 15px;
			  background: #0099cc;
			  cursor: pointer;
			}

			.label {
				font-size: 9pt;
				font-weight: 700;
			}
			
			.pt {
				cursor: pointer;
			}
			
			.nrrw {
				width: 2rem;
			}
			
			.wide {
				width: 50%;
			}
			
			.value {
				font-size: 9pt;
				font-weight: 600;
				float: left;
			}
			
			.input {
				font-family: "Egyptian";
				font-size:   64pt;
				font-weight: 400;
				width: 95%;
			}
			
			.hide {
				display: none;
			}
			
			.control {
				padding: 3px 10px 3px 10px;
				text-align: center;
			}
			
			.fbdy {
				padding-left: 10px;
				padding-right: 10px;
				white-space: nowrap;
			    overflow: hidden;
			    text-overflow: ellipsis;
			}
			
			.segoe {
				line-height: 300px;
				height: 300px;
				font-family: "Segoe UI";
				font-size:   8.9pt;
				font-weight: 400;
			}
			
			.ltr {
				clear: left;
				writing-mode:
				horizontal-lr;
			}
			
			.rtl {
				clear: right;
				direction: rtl;
				unicode-bidi: bidi-override;
				font-feature-settings: "rtlm";
			}

			.ss01 {
				font-feature-settings: "ss01";
			}
		</style>
		<script type='text/javascript'>
			function setSize(val) {
				return 'font-size: '+val+'pt; '; 
			}
			function setStyleForClass(fnclass,style) {
				var list = document.getElementsByClassName(fnclass);
				var x = list.length;
				if (x>0) {
					var i;
					for (i = 0; i < x; i++) {
						var elclass = list[i].getAttribute("class");
						if (elclass.includes('pnum')) {
							style += 'font-feature-settings: "pnum"; ';
						}
						list[i].setAttribute("style",style);
					}
				}
			}

			function slider() {
				var dslider = document.getElementById('direction');
				var sslider = document.getElementById('size');
				var tslider = document.getElementById('theme');
				var yslider = document.getElementById('style');
				
				var s = 64;
				var d = 1;
	
				window.size = s;
				var font = 'font-family: Egyptian; ';

				setStyleForClass('vf',font+setSize(s));
				document.getElementById('sval').innerHTML = s;
				document.getElementById('dval').innerHTML = 'LTR';
	
				dslider.oninput = function() {
					var row = document.getElementById('sample');
					var rowclass = row.getAttribute("class");
					var theme = '';
					if (this.value == 1) {
						rowclass = rowclass.replace(/rtl/,'ltr');
						theme = 'LTR';
					} else if (this.value == 2) {
						rowclass = rowclass.replace(/ltr/,'rtl');
						theme = 'RTL';
					}
					row.setAttribute("class",rowclass);
					document.getElementById('dval').innerHTML = theme;
				}

				sslider.oninput = function() {
					window.size = this.value;
					var o = window.opsz;
					var w = window.weight;
					var font = 'font-family: Egyptian; ';
					setStyleForClass('vf',font+setSize(this.value));
					document.getElementById('sval').innerHTML = this.value;
				}

				tslider.oninput = function() {
					var row = document.getElementById('cell1');
					var rowclass = row.getAttribute("class");
					var theme = '';
					if (this.value == 0) {
						rowclass = rowclass.replace(/[s]?[ld]m/,'lm');
						theme = 'Light';
					} else if (this.value == 1) {
						rowclass = rowclass.replace(/[s]?[ld]m/,'slm');
						theme = '';
					} else if (this.value == 2) {
						rowclass = rowclass.replace(/[s]?[ld]m/,'sdm');
						theme = '';
					} else {
						rowclass = rowclass.replace(/[s]?[ld]m/,'dm');
						theme = 'Dark';
					}
					row.setAttribute("class",rowclass);
					document.getElementById('tval').innerHTML = theme;
				}
				
				yslider.oninput = function() {
					var cell = document.getElementById('sample');
					var cellclass = cell.getAttribute("class");
					var style = '';
					if (this.value == 0) {
						cellclass = cellclass.replace(/ss01/,'ss00');
						style = 'Hieroglyphic';
					} else {
						cellclass = cellclass.replace(/ss00/,'ss01');
						style = 'Hieratic';
					}
					cell.setAttribute("class",cellclass);
					document.getElementById('yval').innerHTML = style;
				}
			}

			window.open = false;
			function edit(domID) {
				if (!window.open) {
					window.open = domID;
					var style = 'nrrw input';
					if (domID == 'sample') {
						style = 'wide input';
					}
					var samplediv = document.getElementById(domID);
					var sampletext = samplediv.innerHTML;
					var input = document.createElement('INPUT');
					input.setAttribute('id','inputbox');
					input.setAttribute('type','text');
					input.setAttribute('class',style);
					input.setAttribute('value',sampletext);
					//input.setAttribute('onblur','save('+domID+')');
					input.addEventListener("keydown", function(event) {
						if (!event) {
							var event = window.event;
						}
						if (event.keyCode == 13){
							save();
						}
					}, false);
					samplediv.innerHTML = '';
					samplediv.appendChild(input);
					input.select();
				} else {
					save();
				}

			}
			
			function save() {
				if (window.open) {
					domID = window.open;
					var inputbox = document.getElementById('inputbox');
					var newsample = inputbox.value;
					console.log('New:');
					console.log(newsample);
					var samplediv = document.getElementById(domID);
					samplediv.innerHTML = newsample;
					window.open = false;
					if (domID != 'sample') {
						console.log(newsample);
						if (newsample) {
							if (domID == 'sval') {
								window.size = newsample;
							}
							if (domID == 'oval') {
								window.opsz = newsample;
							}
							if (domID == 'wval') {
								window.weight = newsample;
							}
						}
						var f = window.font;
						var s = window.size;
						var o = window.opsz;
						var w = window.weight;
						var font = 'font-family: Egyptian'+f+'; '
						setStyleForClass('vf',font+setSize(s) +setVariation(w,o));						
					}
				}
			}
						
		</script>
	</head>
	<body onload="slider()">
		<div class='flex-container'>
			<div class='flexcell text lm' id='cell1' onclick="edit('sample')">
				<div class='fbdy'>
					<div id='sample' class='vf pt ltr ss01' style=''>
					𓂩︁ 𓂓𓐺𓃀 𓂘𓐻𓇓 𓍹𓐼𓀀𓍹𓐼𓁐𓐽𓍺𓁚𓐽𓍺
					</div>
				</div>
			</div>
			<div class='flexcell ctrls' id='cell2'><br/>
				<div class="control">
					<p class="label">Size</p>
					<span id="sval" class="value pt" onclick="edit('sval')"></span>
					<input id="size" type="range" min="4" max="180" step="1" value="64" class="slider">
				</div>
				<div class="control">
					<p class="label">Style</p>
					<span id="yval" class="value pt ss00">Hieroglyphic</span>
					<input id="style" type="range" min="0" max="1" step="1" value="0" class="slider">
				</div>
				<div class="control">
					<p class="label">Direction</p>
					<span id="dval" class="value pt" onclick="edit('dval')"></span>
					<input id="direction" type="range" min="1" max="2" step="1" value="1" class="slider">
				</div>
				<div class="control">
					<p class="label">Theme</p>
					<span id="tval" class="value">Light</span>
					<input id="theme" type="range" min="0" max="3" step="1" value="0" class="slider">
				</div>
			</div>
		</div>
	</body>
</html>
